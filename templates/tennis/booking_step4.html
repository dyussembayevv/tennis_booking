{% extends 'tennis/base.html' %}

{% block title %}–®–∞–≥ 4 - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ{% endblock %}

{% block content %}
<div class="page-title">
    <h1>–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ—Ä—Ç–∞ - –®–∞–≥ 4</h1>
</div>

<div class="progress-bar">
    <div class="progress-step completed">1. –í—ã–±–æ—Ä —Ü–µ–Ω—Ç—Ä–∞</div>
    <div class="progress-step completed">2. –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</div>
    <div class="progress-step completed">3. –£—Å–ª—É–≥–∏</div>
    <div class="progress-step active">4. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</div>
</div>

<div class="grid grid-2">
    <!-- –§–æ—Ä–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è -->
    <div class="card">
        <div class="card-header">
            <h2 class="card-title">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏</h2>
            <p style="color: #7f8c8d;">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</p>
        </div>

        <form method="post">
            {% csrf_token %}
            
            <div class="form-group">
                <label class="form-label">{{ form.full_name.label }}</label>
                {{ form.full_name }}
                {% if form.full_name.errors %}
                    <div style="color: #e74c3c; font-size: 0.9rem; margin-top: 0.5rem;">
                        {{ form.full_name.errors.0 }}
                    </div>
                {% endif %}
            </div>

            <div class="form-group">
                <label class="form-label">{{ form.phone.label }}</label>
                {{ form.phone }}
                {% if form.phone.errors %}
                    <div style="color: #e74c3c; font-size: 0.9rem; margin-top: 0.5rem;">
                        {{ form.phone.errors.0 }}
                    </div>
                {% endif %}
            </div>

            <div class="form-group">
                <label class="form-label">{{ form.email.label }}</label>
                {{ form.email }}
                {% if form.email.errors %}
                    <div style="color: #e74c3c; font-size: 0.9rem; margin-top: 0.5rem;">
                        {{ form.email.errors.0 }}
                    </div>
                {% endif %}
            </div>

            <div class="btn-group">
                <a href="{% url 'booking_step3' %}" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥</a>
                <button type="submit" class="btn btn-success" style="font-size: 1.1rem; padding: 1rem 2rem;">
                    ‚úì –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
                </button>
            </div>
        </form>
    </div>

    <!-- –°–≤–æ–¥–∫–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <div class="card">
        <div class="card-header">
            <h2 class="card-title">–î–µ—Ç–∞–ª–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
        </div>

        <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 5px; margin-bottom: 1.5rem;">
            <h4 style="color: #2c3e50; margin-bottom: 1rem;">üè¢ {{ tennis_center.name }}</h4>
            <p style="color: #7f8c8d; margin-bottom: 0.5rem;">{{ tennis_center.address }}</p>
            <p style="color: #7f8c8d;">{{ tennis_center.phone_number }}</p>
        </div>

        <div style="background: #e8f5e8; padding: 1.5rem; border-radius: 5px; margin-bottom: 1.5rem;">
            <h4 style="color: #27ae60; margin-bottom: 1rem;">üéæ {{ court }}</h4>
            <p style="margin-bottom: 0.5rem;"><strong>üìÖ –î–∞—Ç–∞:</strong> {{ session.date|date:"d.m.Y" }}</p>
            <p style="margin-bottom: 0.5rem;"><strong>‚è∞ –í—Ä–µ–º—è:</strong> {{ session.start_time|time:"H:i" }}</p>
            <p style="margin-bottom: 0.5rem;"><strong>‚è±Ô∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</strong> {{ session.duration_hours }} —á–∞—Å{{ session.duration_hours|pluralize:"–∞,–æ–≤" }}</p>
        </div>

        {% if session.trainer_service or session.racket_rental or session.balls_rental %}
            <div style="background: #fff3cd; padding: 1.5rem; border-radius: 5px; margin-bottom: 1.5rem;">
                <h4 style="color: #856404; margin-bottom: 1rem;">‚ûï –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏:</h4>
                {% if session.trainer_service %}
                    <p style="margin-bottom: 0.3rem;">‚úì –£—Å–ª—É–≥–∏ —Ç—Ä–µ–Ω–µ—Ä–∞ (+10000‚Ç∏)</p>
                {% endif %}
                {% if session.racket_rental %}
                    <p style="margin-bottom: 0.3rem;">‚úì –ê—Ä–µ–Ω–¥–∞ —Ä–∞–∫–µ—Ç–æ–∫: {{ session.racket_rental }} —à—Ç. (+{{ session.racket_rental }}‚Ç∏)</p>
                {% endif %}
                {% if session.balls_rental %}
                    <p style="margin-bottom: 0.3rem;">‚úì –ê—Ä–µ–Ω–¥–∞ –º—è—á–µ–π (+1000‚Ç∏)</p>
                {% endif %}
            </div>
        {% endif %}

        <div style="background: linear-gradient(135deg, #00b894, #00a085); color: white; padding: 1.5rem; border-radius: 5px; text-align: center;">
            <h3 style="color: white; margin-bottom: 0.5rem;">–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:</h3>
            <div style="font-size: 2rem; font-weight: bold;">{{ total_price }}‚Ç∏</div>
            <p style="margin-top: 0.5rem; opacity: 0.9;">–û–ø–ª–∞—Ç–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ</p>
        </div>
    </div>
</div>
{% endblock %}