<!-- templates/tennis/booking_step1.html -->
{% extends 'tennis/base.html' %}

{% block title %}–®–∞–≥ 1 - –í—ã–±–æ—Ä —Ü–µ–Ω—Ç—Ä–∞{% endblock %}

{% block content %}
<div class="page-title">
    <h1>–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ—Ä—Ç–∞ - –®–∞–≥ 1</h1>
</div>

<div class="progress-bar">
    <div class="progress-step active">1. –í—ã–±–æ—Ä —Ü–µ–Ω—Ç—Ä–∞</div>
    <div class="progress-step">2. –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</div>
    <div class="progress-step">3. –£—Å–ª—É–≥–∏</div>
    <div class="progress-step">4. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</div>
</div>

<form method="post" class="card">
    {% csrf_token %}
    <div class="card-header">
        <h2 class="card-title">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–Ω–Ω–∏—Å–Ω—ã–π —Ü–µ–Ω—Ç—Ä</h2>
        <p style="color: #7f8c8d;">–í—ã–±–µ—Ä–∏—Ç–µ —É–¥–æ–±–Ω—ã–π –¥–ª—è –≤–∞—Å —Ü–µ–Ω—Ç—Ä</p>
    </div>

    {% if tennis_centers %}
        <div class="grid grid-2">
            {% for center in tennis_centers %}
                <div class="center-option" onclick="selectCenter({{ center.id }})" style="cursor: pointer; border: 2px solid #ecf0f1; border-radius: 10px; padding: 1.5rem; transition: all 0.3s;">
                    <input type="radio" name="tennis_center" value="{{ center.id }}" id="center_{{ center.id }}" style="display: none;">
                    <h3 style="color: #2c3e50; margin-bottom: 1rem;">{{ center.name }}</h3>
                    <p style="margin-bottom: 0.5rem; color: #7f8c8d;"><strong>üìç</strong> {{ center.address }}</p>
                    <p style="margin-bottom: 0.5rem; color: #7f8c8d;"><strong>üìû</strong> {{ center.phone_number }}</p>
                    <p style="margin-bottom: 0.5rem; color: #7f8c8d;"><strong>üïí</strong> {{ center.opening_time|time:"H:i" }} - {{ center.closing_time|time:"H:i" }}</p>
                    <p style="margin-bottom: 1rem; color: #7f8c8d;"><strong>üéæ</strong> {{ center.courts.count }} –∫–æ—Ä—Ç{{ center.courts.count|pluralize:"–∞,–æ–≤" }}</p>

                    {% if center.courts.exists %}
                        <div style="background: #f8f9fa; padding: 1rem; border-radius: 5px;">
                            <strong>–ö–æ—Ä—Ç—ã –∏ —Ü–µ–Ω—ã:</strong>
                            {% for court in center.courts.all %}
                                <div style="margin-top: 0.5rem;">
                                    –ö–æ—Ä—Ç {{ court.court_number }} - {{ court.price_per_hour }}‚Ç∏/—á–∞—Å ({{ court.get_surface_type_display }})
                                    {% if court.indoor %}<span style="color: #27ae60;">üè† –ö—Ä—ã—Ç—ã–π</span>{% endif %}
                                </div>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            {% endfor %}
        </div>

        <div class="btn-group">
            <a href="{% url 'home' %}" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥</a>
            <button type="submit" class="btn btn-primary">–î–∞–ª–µ–µ ‚Üí</button>
        </div>
    {% else %}
        <p style="text-align: center; color: #7f8c8d; padding: 2rem;">
            –¢–µ–Ω–Ω–∏—Å–Ω—ã–µ —Ü–µ–Ω—Ç—Ä—ã –ø–æ–∫–∞ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.
        </p>
    {% endif %}
</form>

<script>
function selectCenter(centerId) {
    // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö —Ü–µ–Ω—Ç—Ä–æ–≤
    document.querySelectorAll('.center-option').forEach(option => {
        option.style.borderColor = '#ecf0f1';
        option.style.backgroundColor = 'white';
    });

    // –í—ã–¥–µ–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ü–µ–Ω—Ç—Ä
    const selectedOption = document.querySelector(`input[value="${centerId}"]`).closest('.center-option');
    selectedOption.style.borderColor = '#3498db';
    selectedOption.style.backgroundColor = '#f8f9ff';

    // –û—Ç–º–µ—á–∞–µ–º —Ä–∞–¥–∏–æ-–∫–Ω–æ–ø–∫—É
    document.getElementById(`center_${centerId}`).checked = true;
}
</script>
{% endblock %}